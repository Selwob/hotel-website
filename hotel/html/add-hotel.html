<!-- Add hotels to Firestore Database -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Hotel</title>

    <script src="../js/hotel.js" type="text/javascript"></script>

</head>

<body>

    <form id="add-hotel">
        <label for="hotel-id">hotel-id:</label><br>
        <input type="text" id="hotel-id" name="hotel-id" required value=""><br>
        <br>

        <label for="hotel-name">hotel-name:</label><br>
        <input type="text" id="hotel-name" name="hotel-name" required value="Hotel Hotel"><br>
        <br>

        <label for="hotel-latitude">hotel-latitude:</label><br>
        <input type="number" id="hotel-latitude" name="hotel-latitude" min="-90" max="90" required value="45"><br>
        <br>

        <label for="hotel-longitude">hotel-longitude:</label><br>
        <input type="number" id="hotel-longitude" name="hotel-longitude" min="-180" max="180" required value="45"><br>
        <br>

        <label for="hotel-num-rooms">hotel-num-rooms:</label><br>
        <input type="number" id="hotel-num-rooms" name="hotel-num-rooms" required value="15"><br>
        <br>

        <label for="hotel-price">hotel-price:</label><br>
        <input type="number" id="hotel-price" name="hotel-price" required value="5000"><br>
        <br>

        <p>Amenities</p>
        <label for="hotel-wifi">hotel-wifi:</label><br>
        <input type="checkbox" id="hotel-wifi" name="hotel-wifi"><br>

        <label for="hotel-tv">hotel-tv:</label><br>
        <input type="checkbox" id="hotel-tv" name="hotel-tv"><br>

        <label for="hotel-shop">hotel-shop:</label><br>
        <input type="checkbox" id="hotel-shop" name="hotel-shop"><br>

        <label for="hotel-atm">hotel-atm:</label><br>
        <input type="checkbox" id="hotel-atm" name="hotel-atm"><br>

        <label for="hotel-cinema">hotel-cinema:</label><br>
        <input type="checkbox" id="hotel-cinema" name="hotel-cinema"><br>

        <label for="hotel-phone">hotel-phone:</label><br>
        <input type="checkbox" id="hotel-phone" name="hotel-phone"><br>

        <label for="hotel-umbrella">hotel-umbrella:</label><br>
        <input type="checkbox" id="hotel-umbrella" name="hotel-umbrella"><br>
        <br>

        <label for="hotel-tel">hotel-tel:</label><br>
        <input type="number" id="hotel-tel" name="hotel-tel" required value="1234567890"><br>
        <br>

        <label for="hotel-description">hotel-description:</label><br>
        <input type="text" id="hotel-description" name="hotel-description" required value="This hotel is a Lorem ipsum dolor sit amet consectetur adipisicing elit. Id dolor adipisci atque
            deleniti quisquam recusandae eligendi cupiditate laborum minima aliquam!
            When you come to this hotel you will Lorem ipsum dolor sit amet consectetur adipisicing elit. 
            Laborum facere provident quasi commodi impedit. Unde doloribus atque iste consequatur nobis."><br>
        <br>

        <input type="button" value="Submit" id="submit-hotel">

    </form>




    <script>

        function afterClick(){

        }

        // Listen for #add-hotel form submit then send data to Firebase
        const submit = document.querySelector("#submit-hotel")
        submit.onclick = (event) => {
            event.preventDefault();
            let hotelInfo = { 
                hotelId : document.querySelector("#hotel-id").value,
                hotelName : document.querySelector("#hotel-name").value,
                hotelLatitude : document.querySelector("#hotel-latitude").valueAsNumber,
                hotelLongitude : document.querySelector("#hotel-longitude").valueAsNumber,
                hotelNumRooms : document.querySelector("#hotel-num-rooms").valueAsNumber,
                hotelPrice : document.querySelector("#hotel-price").valueAsNumber,
                hotelWifi : document.querySelector("#hotel-wifi").checked,
                hotelTv : document.querySelector("#hotel-tv").checked,
                hotelShop : document.querySelector("#hotel-shop").checked,
                hotelAtm : document.querySelector("#hotel-atm").checked,
                hotelCinema : document.querySelector("#hotel-cinema").checked,
                hotelPhone : document.querySelector("#hotel-phone").checked,
                hotelUmbrella : document.querySelector("#hotel-umbrella").checked,
                hotelTel : document.querySelector("#hotel-tel").valueAsNumber,
                hotelDescription : document.querySelector("#hotel-description").value,

            }

            afterClick(hotelInfo);

        }
    </script>

    

    <!-- Load Firebase -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.2.0/firebase-app.js'

        // Add Firebase products that you want to use
        import { getFirestore, collection, addDoc, getDoc, getDocs, doc, query, setDoc, updateDoc, GeoPoint } from 'https://www.gstatic.com/firebasejs/9.2.0/firebase-firestore.js'

        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCPSSZTxfN21Loqu4WfhSkTBNPOVxIQLu4",
            authDomain: "hotel-website-59961.firebaseapp.com",
            projectId: "hotel-website-59961",
            storageBucket: "hotel-website-59961.appspot.com",
            messagingSenderId: "633745579152",
            appId: "1:633745579152:web:6f5b3e5eda5618f9e24c15",
            measurementId: "G-4PEEVK84HW"
        };

        const firebaseApp = initializeApp(firebaseConfig);
        const db = getFirestore(firebaseApp);

        // const hotelList = await getDocs(collection(db, "hotels"));
        // hotelList.forEach((doc) => {
        //     console.log(doc.id, " => ", doc.data().location);
          
        // });

        afterClick = async function(hotelInfo) {
            await setDoc(doc(db, "hotels", hotelInfo.hotelId), {
                name: hotelInfo.hotelName,
                location: new GeoPoint(hotelInfo.hotelLatitude, hotelInfo.hotelLongitude),
                numRooms: hotelInfo.hotelNumRooms,
                price: hotelInfo.hotelPrice,
                amenities: {
                    wifi: hotelInfo.hotelWifi,
                    tv: hotelInfo.hotelTv,
                    shop: hotelInfo.hotelShop,
                    atm: hotelInfo.hotelAtm,
                    cinema: hotelInfo.hotelCinema,
                    phone: hotelInfo.hotelPhone,
                    umbrella: hotelInfo.hotelUmbrella,
                },
                tel: hotelInfo.hotelTel,
                description: hotelInfo.hotelDescription,
            }).then(console.log("hotel uploaded to firebase. probably."));
        }

    </script>

</body>

</html>